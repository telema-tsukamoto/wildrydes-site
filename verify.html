<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WildRydes Verify</title>
  <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.2.0/dist/amazon-cognito-identity.min.js"></script>

  <!-- config.js を読み込む -->
  <script src="js/config.js"></script>

  <script>
    function verifyUser() {
      const username = document.getElementById('email').value;
      const code = document.getElementById('code').value;

      // UserPool 設定
      const poolData = {
        UserPoolId: window._config.cognito.userPoolId,        // 新しいUserPoolId
        ClientId: window._config.cognito.userPoolClientId     // 新しいClientId
      };
      const userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);

      const userData = {
        Username: username,
        Pool: userPool
      };
      const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);

      cognitoUser.confirmRegistration(code, true, function(err, result) {
        if (err) {
          alert("確認失敗: " + err.message || JSON.stringify(err));
          return;
        }
        alert("ユーザー確認成功: " + result);
      });
    }
  </script>
</head>
<body>
  <h1>Verify Your Account</h1>
  <label for="email">Email:</label>
  <input type="email" id="email" required><br><br>

  <label for="code">Verification Code:</label>
  <input type="text" id="code" required><br><br>

  <button onclick="verifyUser()">Verify</button>
</body>
</html>
